version: 1.1.{build}
install:
  - ps: iwr https://get.dot.net/v1/dotnet-install.ps1 -outfile dotnet-install.ps1
  - ps: .\dotnet-install.ps1 -Version 2.1.300 -InstallDir $env:ProgramFiles/dotnet
pull_requests:
  do_not_increment_build_number: true
image: Visual Studio 2017
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'
environment:
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true
build_script:
  - ps: .\build.ps1 -IsOfficialBuild
artifacts:
  - path: 'artifacts\*.nupkg'
    name: Packages
    type: NuGetPackages  
deploy:
- provider: GitHub
  auth_token:
    secure: 0bxTAByaY8EnuFSW7nFhWfeKtFZSWlhTNnKXfv9hURfHid5vSI10kz/FcEY5DHkCeEbQB7Dv7F4c3z17rkP2FU0HuqOTnf8mqYqAsESO2NM=
  artifact: Packages
  draft: true
  on:
    branch: master